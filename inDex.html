<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FitLife Pro - Sistema Completo</title>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700;900&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary: #FF6B35;
            --secondary: #004E89;
            --accent: #F7931E;
            --dark: #1A1A2E;
            --light: #F4F4F9;
            --success: #2ECC71;
            --danger: #E74C3C;
        }
        
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'Outfit', sans-serif;
            background: var(--dark);
            color: var(--light);
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        .hidden { display: none !important; }
        
        /* LOADING */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.95);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            flex-direction: column;
            gap: 20px;
        }
        
        .loading-overlay.active { display: flex; }
        
        .spinner {
            width: 80px;
            height: 80px;
            border: 8px solid rgba(255,255,255,0.1);
            border-top: 8px solid var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .loading-text {
            color: var(--light);
            font-size: 1.2em;
            font-weight: 600;
        }
        
        /* LOGIN SCREEN */
        #loginScreen {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            position: relative;
            overflow: hidden;
        }
        
        #loginScreen::before {
            content: '';
            position: absolute;
            width: 200%;
            height: 200%;
            background: url('data:image/svg+xml,<svg width="60" height="60" xmlns="http://www.w3.org/2000/svg"><path d="M30 0 L60 30 L30 60 L0 30 Z" fill="rgba(255,255,255,0.02)"/></svg>');
            animation: drift 60s linear infinite;
        }
        
        @keyframes drift {
            0% { transform: translate(0, 0) rotate(0deg); }
            100% { transform: translate(-50%, -50%) rotate(360deg); }
        }
        
        /* LANGUAGE SELECTOR NO TOPO */
        .language-selector-top {
            position: absolute;
            top: 30px;
            right: 30px;
            z-index: 10;
        }
        
        .language-selector-top select {
            padding: 12px 20px;
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 12px;
            background: rgba(255,255,255,0.95);
            color: var(--dark);
            font-size: 1em;
            font-weight: 700;
            cursor: pointer;
            font-family: 'Outfit', sans-serif;
            transition: all 0.3s;
        }
        
        .language-selector-top select:hover {
            background: white;
            border-color: var(--primary);
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(255, 107, 53, 0.3);
        }
        
        .language-selector-top select option {
            background: white;
            color: var(--dark);
        }
        
        .login-box {
            background: rgba(255,255,255,0.95);
            backdrop-filter: blur(20px);
            padding: 50px;
            border-radius: 30px;
            max-width: 550px;
            width: 90%;
            box-shadow: 0 30px 90px rgba(0,0,0,0.3);
            position: relative;
            z-index: 1;
            animation: slideUp 0.6s cubic-bezier(0.16, 1, 0.3, 1);
        }
        
        @keyframes slideUp {
            from { opacity: 0; transform: translateY(40px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .login-box h1 {
            font-size: 3em;
            font-weight: 900;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
            text-align: center;
        }
        
        .login-subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
            font-weight: 600;
            font-size: 1.05em;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--dark);
            font-size: 0.95em;
        }
        
        .form-group input,
        .form-group select {
            width: 100%;
            padding: 15px 20px;
            border: 2px solid #e0e0e0;
            border-radius: 15px;
            font-size: 1em;
            font-family: 'Outfit', sans-serif;
            transition: all 0.3s;
            background: white;
            color: var(--dark);
        }
        
        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: var(--primary);
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(255, 107, 53, 0.2);
        }
        
        .btn {
            width: 100%;
            padding: 18px;
            border: none;
            border-radius: 15px;
            font-size: 1.1em;
            font-weight: 700;
            font-family: 'Outfit', sans-serif;
            cursor: pointer;
            transition: all 0.3s;
            background: linear-gradient(135deg, var(--primary), var(--accent));
            color: white;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-top: 10px;
        }
        
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(255, 107, 53, 0.4);
        }
        
        .link-btn {
            text-align: center;
            color: var(--primary);
            cursor: pointer;
            margin-top: 20px;
            font-weight: 600;
            text-decoration: underline;
        }
        
        .link-btn:hover { color: var(--secondary); }
        
        /* APP SCREEN */
        #appScreen {
            display: none;
            padding: 20px;
            max-width: 1400px;
            margin: 0 auto;
        }
        
        .app-header {
            background: rgba(255,255,255,0.05);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 25px;
            padding: 25px 35px;
            margin-bottom: 25px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
        }
        
        .user-info {
            display: flex;
            align-items: center;
            gap: 20px;
        }
        
        .user-avatar {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--accent));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2em;
            font-weight: 900;
            position: relative;
            border: 3px solid rgba(255,255,255,0.2);
        }
        
        .level-badge {
            position: absolute;
            bottom: -5px;
            right: -5px;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.3em;
            border: 3px solid var(--dark);
        }
        
        .level-bronze { background: linear-gradient(135deg, #CD7F32, #E9967A); }
        
        .tabs {
            display: flex;
            background: rgba(255,255,255,0.05);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 25px;
            padding: 12px;
            margin-bottom: 25px;
            gap: 10px;
            overflow-x: auto;
            scrollbar-width: none;
        }
        
        .tabs::-webkit-scrollbar { display: none; }
        
        .tab {
            flex: 1;
            padding: 15px 25px;
            text-align: center;
            cursor: pointer;
            border: none;
            background: transparent;
            font-size: 1em;
            font-weight: 700;
            color: rgba(255,255,255,0.6);
            border-radius: 18px;
            transition: all 0.3s;
            white-space: nowrap;
            min-width: 130px;
            font-family: 'Outfit', sans-serif;
        }
        
        .tab:hover {
            background: rgba(255,255,255,0.1);
            color: white;
        }
        
        .tab.active {
            background: linear-gradient(135deg, var(--primary), var(--accent));
            color: white;
            box-shadow: 0 5px 20px rgba(255, 107, 53, 0.4);
        }
        
        .content {
            background: rgba(255,255,255,0.05);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 25px;
            padding: 40px;
            min-height: 600px;
        }
        
        .tab-content {
            display: none;
            animation: fadeIn 0.4s;
        }
        
        .tab-content.active { display: block; }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .welcome-banner {
            background: linear-gradient(135deg, var(--primary), var(--accent));
            padding: 40px;
            border-radius: 20px;
            margin-bottom: 30px;
            box-shadow: 0 10px 40px rgba(255, 107, 53, 0.3);
            position: relative;
            overflow: hidden;
        }
        
        .welcome-banner::before {
            content: 'üí™';
            position: absolute;
            right: 30px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 120px;
            opacity: 0.1;
        }
        
        .welcome-banner h2 {
            font-size: 2.5em;
            font-weight: 900;
            margin-bottom: 15px;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: linear-gradient(135deg, rgba(255,107,53,0.1), rgba(247,147,30,0.1));
            border: 2px solid rgba(255,107,53,0.3);
            padding: 30px;
            border-radius: 20px;
            text-align: center;
            transition: all 0.3s;
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(255, 107, 53, 0.3);
        }
        
        .stat-card h4 {
            font-size: 3em;
            font-weight: 900;
            background: linear-gradient(135deg, var(--primary), var(--accent));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
        }
        
        .notification {
            position: fixed;
            top: 25px;
            right: 25px;
            background: linear-gradient(135deg, var(--success), #27AE60);
            color: white;
            padding: 20px 35px;
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(46, 204, 113, 0.4);
            display: none;
            animation: slideInRight 0.4s;
            z-index: 2000;
            font-weight: 700;
            max-width: 400px;
        }
        
        @keyframes slideInRight {
            from { transform: translateX(400px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        .camera-controls {
            display: flex;
            gap: 15px;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        
        .camera-switch-btn {
            padding: 15px 30px;
            background: linear-gradient(135deg, var(--secondary), #003366);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 1em;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            font-family: 'Outfit', sans-serif;
        }
        
        .camera-switch-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(0, 78, 137, 0.4);
        }
        
        #video {
            width: 100%;
            max-width: 640px;
            border-radius: 15px;
            margin: 20px 0;
            display: none;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
        }
        
        #canvas {
            max-width: 100%;
            border-radius: 15px;
            display: none;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
        }
        
        @media (max-width: 768px) {
            .login-box { padding: 30px 25px; }
            .content { padding: 25px; }
            .language-selector-top { top: 15px; right: 15px; }
            .language-selector-top select { padding: 10px 15px; font-size: 0.9em; }
        }
    </style>
</head>
<body>
    <!-- LOADING -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="spinner"></div>
        <div class="loading-text" id="loadingText">Carregando...</div>
    </div>
    
    <!-- LOGIN -->
    <div id="loginScreen">
        <!-- SELETOR DE IDIOMA NO TOPO -->
        <div class="language-selector-top">
            <select id="loginLanguageSelect" onchange="changeLoginLanguage(this.value)">
                <option value="pt">üáßüá∑ Portugu√™s</option>
                <option value="en">üá∫üá∏ English</option>
                <option value="es">üá™üá∏ Espa√±ol</option>
                <option value="fr">üá´üá∑ Fran√ßais</option>
                <option value="de">üá©üá™ Deutsch</option>
                <option value="it">üáÆüáπ Italiano</option>
                <option value="zh">üá®üá≥ ‰∏≠Êñá</option>
                <option value="ja">üáØüáµ Êó•Êú¨Ë™û</option>
            </select>
        </div>
        
        <div class="login-box">
            <h1>üí™ FitLife Pro</h1>
            <p class="login-subtitle" id="loginSubtitle">Sistema completo de treino e nutri√ß√£o</p>
            
            <div id="loginForm">
                <div class="form-group">
                    <label id="labelEmail">Email</label>
                    <input type="email" id="loginEmail" placeholder="seu@email.com" autocomplete="email">
                </div>
                <div class="form-group">
                    <label id="labelPassword">Senha</label>
                    <input type="password" id="loginPassword" placeholder="********" autocomplete="current-password">
                </div>
                <button class="btn" onclick="doLogin()" id="btnLogin">Entrar</button>
                <p class="link-btn" onclick="showRegister()" id="linkRegister">Criar nova conta</p>
            </div>

            <div id="registerForm" class="hidden">
                <div class="form-group">
                    <label id="labelName">Nome completo</label>
                    <input type="text" id="registerName" placeholder="Seu nome" autocomplete="name">
                </div>
                <div class="form-group">
                    <label id="labelRegEmail">Email</label>
                    <input type="email" id="registerEmail" placeholder="seu@email.com" autocomplete="email">
                </div>
                <div class="form-group">
                    <label id="labelRegPassword">Senha</label>
                    <input type="password" id="registerPassword" placeholder="M√≠nimo 6 caracteres" autocomplete="new-password">
                </div>
                <div class="form-group">
                    <label id="labelAge">Idade</label>
                    <input type="number" id="registerAge" placeholder="25" min="13" max="120">
                </div>
                <div class="form-group">
                    <label id="labelHeight">Altura (cm)</label>
                    <input type="number" id="registerHeight" placeholder="175" min="100" max="250">
                </div>
                <div class="form-group">
                    <label id="labelWeight">Peso (kg)</label>
                    <input type="number" id="registerWeight" placeholder="70" min="30" max="300">
                </div>
                <div class="form-group">
                    <label id="labelGoal">Objetivo</label>
                    <select id="registerGoal">
                        <option value="muscle" id="goalMuscle">Ganhar massa muscular</option>
                        <option value="cut" id="goalCut">Secar / Definir</option>
                        <option value="strength" id="goalStrength">Ganhar for√ßa</option>
                        <option value="beginner" id="goalBeginner">Iniciante</option>
                    </select>
                </div>
                <button class="btn" onclick="doRegister()" id="btnRegister">Criar conta</button>
                <p class="link-btn" onclick="showLogin()" id="linkLogin">J√° tenho conta</p>
            </div>
        </div>
    </div>

    <!-- APP -->
    <div id="appScreen">
        <div class="app-header">
            <div class="user-info">
                <div class="user-avatar" id="userAvatar">U
                    <div class="level-badge level-bronze" id="levelBadge">ü•â</div>
                </div>
                <div>
                    <h3 id="userName">Usu√°rio</h3>
                    <p id="userLevelText">Bronze - N√≠vel 1</p>
                </div>
            </div>
            <div style="display:flex;gap:15px;align-items:center;">
                <select id="appLanguageSelect" onchange="changeAppLanguage(this.value)">
                    <option value="pt">üáßüá∑ PT</option>
                    <option value="en">üá∫üá∏ EN</option>
                    <option value="es">üá™üá∏ ES</option>
                    <option value="fr">üá´üá∑ FR</option>
                    <option value="de">üá©üá™ DE</option>
                    <option value="it">üáÆüáπ IT</option>
                    <option value="zh">üá®üá≥ ZH</option>
                    <option value="ja">üáØüáµ JA</option>
                </select>
                <button class="btn" onclick="logout()" style="width:auto;padding:12px 25px;margin:0;" id="btnLogout">Sair</button>
            </div>
        </div>

        <div class="tabs">
            <button class="tab active" onclick="showTab('home')" id="tabHome">üè† In√≠cio</button>
            <button class="tab" onclick="showTab('camera')" id="tabCamera">üì∑ Scanner IA</button>
        </div>

        <div class="content">
            <div id="home" class="tab-content active">
                <div class="welcome-banner">
                    <h2 id="homeWelcome">Bem-vindo!</h2>
                    <p id="homeText" style="font-size:1.2em;opacity:0.95;">Sua jornada fitness come√ßa aqui!</p>
                </div>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <h4 id="statDays">0</h4>
                        <p style="font-size:1.1em;font-weight:600;" id="labelDays">Dias de treino</p>
                    </div>
                    <div class="stat-card">
                        <h4 id="statLevel">1</h4>
                        <p style="font-size:1.1em;font-weight:600;" id="labelLevel">N√≠vel</p>
                    </div>
                    <div class="stat-card">
                        <h4 id="statXP">0</h4>
                        <p style="font-size:1.1em;font-weight:600;" id="labelXP">XP Total</p>
                    </div>
                </div>
            </div>

            <div id="camera" class="tab-content">
                <h3 style="font-size:2em;margin-bottom:20px;" id="cameraTitle">üì∑ Scanner de Alimentos com IA</h3>
                <p style="opacity:0.9;margin-bottom:25px;font-size:1.1em;" id="cameraDesc">Use a c√¢mera para identificar alimentos com TensorFlow.js</p>
                
                <video id="video" autoplay playsinline></video>
                <canvas id="canvas"></canvas>
                
                <div class="camera-controls">
                    <button class="btn" onclick="startCamera()" id="btnStart">üì∑ <span id="btnStartText">Ativar C√¢mera</span></button>
                    <button class="camera-switch-btn" onclick="switchCamera()" id="btnSwitch" style="display:none;"><span id="btnSwitchText">üîÑ Trocar C√¢mera</span></button>
                    <button class="btn" onclick="capturePhoto()" id="btnCapture" style="display:none;background:var(--success);"><span id="btnCaptureText">üì∏ Capturar</span></button>
                </div>
                
                <div id="analysis" style="display:none;margin-top:20px;background:rgba(255,255,255,0.08);padding:25px;border-radius:15px;"></div>
            </div>
        </div>
    </div>

    <div id="notification" class="notification"></div>

    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@3.11.0/dist/tf.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/coco-ssd@2.2.2/dist/coco-ssd.min.js"></script>
    
    <script>
        console.log('üöÄ FitLife Pro iniciando...');
        
        // TRADU√á√ïES COMPLETAS
        const TRANSLATIONS = {
            pt: {
                loginSubtitle: 'Sistema completo de treino e nutri√ß√£o',
                labelEmail: 'Email',
                labelPassword: 'Senha',
                btnLogin: 'Entrar',
                linkRegister: 'Criar nova conta',
                labelName: 'Nome completo',
                labelRegEmail: 'Email',
                labelRegPassword: 'Senha',
                labelAge: 'Idade',
                labelHeight: 'Altura (cm)',
                labelWeight: 'Peso (kg)',
                labelGoal: 'Objetivo',
                goalMuscle: 'Ganhar massa muscular',
                goalCut: 'Secar / Definir',
                goalStrength: 'Ganhar for√ßa',
                goalBeginner: 'Iniciante',
                btnRegister: 'Criar conta',
                linkLogin: 'J√° tenho conta',
                btnLogout: 'Sair',
                tabHome: 'üè† In√≠cio',
                tabCamera: 'üì∑ Scanner IA',
                homeWelcome: 'Bem-vindo',
                homeText: 'Sua jornada fitness come√ßa aqui!',
                labelDays: 'Dias de treino',
                labelLevel: 'N√≠vel',
                labelXP: 'XP Total',
                cameraTitle: 'üì∑ Scanner de Alimentos com IA',
                cameraDesc: 'Use a c√¢mera para identificar alimentos com TensorFlow.js',
                btnStartText: 'Ativar C√¢mera',
                btnSwitchText: 'üîÑ Trocar C√¢mera (Frontal/Traseira)',
                btnCaptureText: 'üì∏ Capturar e Analisar',
                loading: 'Carregando...',
                loggingIn: 'Fazendo login...',
                creating: 'Criando conta...',
                fillFields: 'Preencha todos os campos!',
                wrongPassword: 'Senha incorreta!',
                userNotFound: 'Usu√°rio n√£o encontrado!',
                emailExists: 'Este email j√° est√° cadastrado!',
                passwordMin: 'Senha deve ter m√≠nimo 6 caracteres!',
                loginSuccess: 'Login realizado!',
                accountCreated: 'Conta criada com sucesso!',
                goodbye: 'At√© logo!',
                welcomeBack: 'Bem-vindo de volta!',
                activatingCamera: 'Ativando c√¢mera...',
                loadingAI: 'Carregando modelo de IA...',
                cameraActivated: 'C√¢mera ativada!',
                cameraError: 'Erro na c√¢mera',
                analyzing: 'Analisando com IA...',
                analysisComplete: 'An√°lise completa!',
                cameraFront: 'C√¢mera Frontal ativada!',
                cameraBack: 'C√¢mera Traseira ativada!'
            },
            en: {
                loginSubtitle: 'Complete training and nutrition system',
                labelEmail: 'Email',
                labelPassword: 'Password',
                btnLogin: 'Login',
                linkRegister: 'Create new account',
                labelName: 'Full name',
                labelRegEmail: 'Email',
                labelRegPassword: 'Password',
                labelAge: 'Age',
                labelHeight: 'Height (cm)',
                labelWeight: 'Weight (kg)',
                labelGoal: 'Goal',
                goalMuscle: 'Gain muscle mass',
                goalCut: 'Cut / Define',
                goalStrength: 'Gain strength',
                goalBeginner: 'Beginner',
                btnRegister: 'Create account',
                linkLogin: 'I have an account',
                btnLogout: 'Logout',
                tabHome: 'üè† Home',
                tabCamera: 'üì∑ AI Scanner',
                homeWelcome: 'Welcome',
                homeText: 'Your fitness journey starts here!',
                labelDays: 'Training days',
                labelLevel: 'Level',
                labelXP: 'Total XP',
                cameraTitle: 'üì∑ AI Food Scanner',
                cameraDesc: 'Use camera to identify food with TensorFlow.js',
                btnStartText: 'Activate Camera',
                btnSwitchText: 'üîÑ Switch Camera (Front/Back)',
                btnCaptureText: 'üì∏ Capture & Analyze',
                loading: 'Loading...',
                loggingIn: 'Logging in...',
                creating: 'Creating account...',
                fillFields: 'Fill all fields!',
                wrongPassword: 'Wrong password!',
                userNotFound: 'User not found!',
                emailExists: 'Email already registered!',
                passwordMin: 'Password must be at least 6 characters!',
                loginSuccess: 'Login successful!',
                accountCreated: 'Account created successfully!',
                goodbye: 'Goodbye!',
                welcomeBack: 'Welcome back!',
                activatingCamera: 'Activating camera...',
                loadingAI: 'Loading AI model...',
                cameraActivated: 'Camera activated!',
                cameraError: 'Camera error',
                analyzing: 'Analyzing with AI...',
                analysisComplete: 'Analysis complete!',
                cameraFront: 'Front Camera activated!',
                cameraBack: 'Back Camera activated!'
            },
            es: {
                loginSubtitle: 'Sistema completo de entrenamiento y nutrici√≥n',
                labelEmail: 'Correo',
                labelPassword: 'Contrase√±a',
                btnLogin: 'Entrar',
                linkRegister: 'Crear nueva cuenta',
                labelName: 'Nombre completo',
                labelRegEmail: 'Correo',
                labelRegPassword: 'Contrase√±a',
                labelAge: 'Edad',
                labelHeight: 'Altura (cm)',
                labelWeight: 'Peso (kg)',
                labelGoal: 'Objetivo',
                goalMuscle: 'Ganar masa muscular',
                goalCut: 'Definir / Cortar',
                goalStrength: 'Ganar fuerza',
                goalBeginner: 'Principiante',
                btnRegister: 'Crear cuenta',
                linkLogin: 'Ya tengo cuenta',
                btnLogout: 'Salir',
                tabHome: 'üè† Inicio',
                tabCamera: 'üì∑ Esc√°ner IA',
                homeWelcome: 'Bienvenido',
                homeText: '¬°Tu viaje fitness comienza aqu√≠!',
                labelDays: 'D√≠as de entrenamiento',
                labelLevel: 'Nivel',
                labelXP: 'XP Total',
                cameraTitle: 'üì∑ Esc√°ner de Alimentos con IA',
                cameraDesc: 'Usa la c√°mara para identificar alimentos con TensorFlow.js',
                btnStartText: 'Activar C√°mara',
                btnSwitchText: 'üîÑ Cambiar C√°mara (Frontal/Trasera)',
                btnCaptureText: 'üì∏ Capturar y Analizar',
                loading: 'Cargando...',
                loggingIn: 'Iniciando sesi√≥n...',
                creating: 'Creando cuenta...',
                fillFields: '¬°Completa todos los campos!',
                wrongPassword: '¬°Contrase√±a incorrecta!',
                userNotFound: '¬°Usuario no encontrado!',
                emailExists: '¬°Email ya registrado!',
                passwordMin: '¬°La contrase√±a debe tener m√≠nimo 6 caracteres!',
                loginSuccess: '¬°Inicio de sesi√≥n exitoso!',
                accountCreated: '¬°Cuenta creada con √©xito!',
                goodbye: '¬°Adi√≥s!',
                welcomeBack: '¬°Bienvenido de vuelta!',
                activatingCamera: 'Activando c√°mara...',
                loadingAI: 'Cargando modelo IA...',
                cameraActivated: '¬°C√°mara activada!',
                cameraError: 'Error en c√°mara',
                analyzing: 'Analizando con IA...',
                analysisComplete: '¬°An√°lisis completo!',
                cameraFront: '¬°C√°mara Frontal activada!',
                cameraBack: '¬°C√°mara Trasera activada!'
            },
            fr: {
                loginSubtitle: 'Syst√®me complet d\'entra√Ænement et nutrition',
                labelEmail: 'Email',
                labelPassword: 'Mot de passe',
                btnLogin: 'Connexion',
                linkRegister: 'Cr√©er un compte',
                labelName: 'Nom complet',
                labelRegEmail: 'Email',
                labelRegPassword: 'Mot de passe',
                labelAge: '√Çge',
                labelHeight: 'Taille (cm)',
                labelWeight: 'Poids (kg)',
                labelGoal: 'Objectif',
                goalMuscle: 'Gagner masse musculaire',
                goalCut: 'S√©cher / D√©finir',
                goalStrength: 'Gagner force',
                goalBeginner: 'D√©butant',
                btnRegister: 'Cr√©er compte',
                linkLogin: 'J\'ai un compte',
                btnLogout: 'D√©connexion',
                tabHome: 'üè† Accueil',
                tabCamera: 'üì∑ Scanner IA',
                homeWelcome: 'Bienvenue',
                homeText: 'Votre voyage fitness commence ici!',
                labelDays: 'Jours d\'entra√Ænement',
                labelLevel: 'Niveau',
                labelXP: 'XP Total',
                cameraTitle: 'üì∑ Scanner Alimentaire IA',
                cameraDesc: 'Utilisez la cam√©ra pour identifier les aliments',
                btnStartText: 'Activer Cam√©ra',
                btnSwitchText: 'üîÑ Changer Cam√©ra',
                btnCaptureText: 'üì∏ Capturer',
                loading: 'Chargement...',
                loggingIn: 'Connexion...',
                creating: 'Cr√©ation...',
                fillFields: 'Remplissez tous les champs!',
                wrongPassword: 'Mot de passe incorrect!',
                userNotFound: 'Utilisateur non trouv√©!',
                emailExists: 'Email d√©j√† enregistr√©!',
                passwordMin: 'Mot de passe minimum 6 caract√®res!',
                loginSuccess: 'Connexion r√©ussie!',
                accountCreated: 'Compte cr√©√©!',
                goodbye: 'Au revoir!',
                welcomeBack: 'Bon retour!',
                activatingCamera: 'Activation cam√©ra...',
                loadingAI: 'Chargement IA...',
                cameraActivated: 'Cam√©ra activ√©e!',
                cameraError: 'Erreur cam√©ra',
                analyzing: 'Analyse IA...',
                analysisComplete: 'Analyse termin√©e!',
                cameraFront: 'Cam√©ra Frontale activ√©e!',
                cameraBack: 'Cam√©ra Arri√®re activ√©e!'
            },
            de: {
                loginSubtitle: 'Komplettes Training- und Ern√§hrungssystem',
                labelEmail: 'E-Mail',
                labelPassword: 'Passwort',
                btnLogin: 'Anmelden',
                linkRegister: 'Konto erstellen',
                labelName: 'Vollst√§ndiger Name',
                labelRegEmail: 'E-Mail',
                labelRegPassword: 'Passwort',
                labelAge: 'Alter',
                labelHeight: 'Gr√∂√üe (cm)',
                labelWeight: 'Gewicht (kg)',
                labelGoal: 'Ziel',
                goalMuscle: 'Muskelmasse aufbauen',
                goalCut: 'Definieren',
                goalStrength: 'Kraft gewinnen',
                goalBeginner: 'Anf√§nger',
                btnRegister: 'Konto erstellen',
                linkLogin: 'Ich habe ein Konto',
                btnLogout: 'Abmelden',
                tabHome: 'üè† Start',
                tabCamera: 'üì∑ KI-Scanner',
                homeWelcome: 'Willkommen',
                homeText: 'Ihre Fitnessreise beginnt hier!',
                labelDays: 'Trainingstage',
                labelLevel: 'Stufe',
                labelXP: 'Gesamt XP',
                cameraTitle: 'üì∑ KI-Lebensmittelscanner',
                cameraDesc: 'Verwenden Sie die Kamera zur Identifizierung',
                btnStartText: 'Kamera aktivieren',
                btnSwitchText: 'üîÑ Kamera wechseln',
                btnCaptureText: 'üì∏ Erfassen',
                loading: 'Laden...',
                loggingIn: 'Anmelden...',
                creating: 'Erstellen...',
                fillFields: 'Alle Felder ausf√ºllen!',
                wrongPassword: 'Falsches Passwort!',
                userNotFound: 'Benutzer nicht gefunden!',
                emailExists: 'E-Mail bereits registriert!',
                passwordMin: 'Passwort mindestens 6 Zeichen!',
                loginSuccess: 'Anmeldung erfolgreich!',
                accountCreated: 'Konto erstellt!',
                goodbye: 'Auf Wiedersehen!',
                welcomeBack: 'Willkommen zur√ºck!',
                activatingCamera: 'Kamera aktivieren...',
                loadingAI: 'KI laden...',
                cameraActivated: 'Kamera aktiviert!',
                cameraError: 'Kamera-Fehler',
                analyzing: 'KI-Analyse...',
                analysisComplete: 'Analyse abgeschlossen!',
                cameraFront: 'Frontkamera aktiviert!',
                cameraBack: 'R√ºckkamera aktiviert!'
            },
            it: {
                loginSubtitle: 'Sistema completo di allenamento e nutrizione',
                labelEmail: 'Email',
                labelPassword: 'Password',
                btnLogin: 'Accedi',
                linkRegister: 'Crea account',
                labelName: 'Nome completo',
                labelRegEmail: 'Email',
                labelRegPassword: 'Password',
                labelAge: 'Et√†',
                labelHeight: 'Altezza (cm)',
                labelWeight: 'Peso (kg)',
                labelGoal: 'Obiettivo',
                goalMuscle: 'Aumentare massa',
                goalCut: 'Definire',
                goalStrength: 'Aumentare forza',
                goalBeginner: 'Principiante',
                btnRegister: 'Crea account',
                linkLogin: 'Ho un account',
                btnLogout: 'Esci',
                tabHome: 'üè† Inizio',
                tabCamera: 'üì∑ Scanner IA',
                homeWelcome: 'Benvenuto',
                homeText: 'Il tuo viaggio fitness inizia qui!',
                labelDays: 'Giorni di allenamento',
                labelLevel: 'Livello',
                labelXP: 'XP Totale',
                cameraTitle: 'üì∑ Scanner Alimentare IA',
                cameraDesc: 'Usa la fotocamera per identificare gli alimenti',
                btnStartText: 'Attiva Fotocamera',
                btnSwitchText: 'üîÑ Cambia Fotocamera',
                btnCaptureText: 'üì∏ Cattura',
                loading: 'Caricamento...',
                loggingIn: 'Accesso...',
                creating: 'Creazione...',
                fillFields: 'Compila tutti i campi!',
                wrongPassword: 'Password errata!',
                userNotFound: 'Utente non trovato!',
                emailExists: 'Email gi√† registrata!',
                passwordMin: 'Password minimo 6 caratteri!',
                loginSuccess: 'Accesso riuscito!',
                accountCreated: 'Account creato!',
                goodbye: 'Arrivederci!',
                welcomeBack: 'Bentornato!',
                activatingCamera: 'Attivazione fotocamera...',
                loadingAI: 'Caricamento IA...',
                cameraActivated: 'Fotocamera attivata!',
                cameraError: 'Errore fotocamera',
                analyzing: 'Analisi IA...',
                analysisComplete: 'Analisi completa!',
                cameraFront: 'Fotocamera Frontale attivata!',
                cameraBack: 'Fotocamera Posteriore attivata!'
            },
            zh: {
                loginSubtitle: 'ÂÆåÊï¥ÁöÑËÆ≠ÁªÉÂíåËê•ÂÖªÁ≥ªÁªü',
                labelEmail: 'ÁîµÂ≠êÈÇÆ‰ª∂',
                labelPassword: 'ÂØÜÁ†Å',
                btnLogin: 'ÁôªÂΩï',
                linkRegister: 'ÂàõÂª∫Ë¥¶Êà∑',
                labelName: 'ÂÖ®Âêç',
                labelRegEmail: 'ÁîµÂ≠êÈÇÆ‰ª∂',
                labelRegPassword: 'ÂØÜÁ†Å',
                labelAge: 'Âπ¥ÈæÑ',
                labelHeight: 'Ë∫´È´ò (cm)',
                labelWeight: '‰ΩìÈáç (kg)',
                labelGoal: 'ÁõÆÊ†á',
                goalMuscle: 'Â¢ûÂä†ËÇåËÇâ',
                goalCut: 'ÂáèËÑÇ',
                goalStrength: 'Â¢ûÂº∫ÂäõÈáè',
                goalBeginner: 'ÂàùÂ≠¶ËÄÖ',
                btnRegister: 'ÂàõÂª∫Ë¥¶Êà∑',
                linkLogin: 'ÊàëÊúâË¥¶Êà∑',
                btnLogout: 'ÁôªÂá∫',
                tabHome: 'üè† ‰∏ªÈ°µ',
                tabCamera: 'üì∑ AIÊâ´Êèè',
                homeWelcome: 'Ê¨¢Ëøé',
                homeText: 'ÊÇ®ÁöÑÂÅ•Ë∫´‰πãÊóÖ‰ªéËøôÈáåÂºÄÂßãÔºÅ',
                labelDays: 'ËÆ≠ÁªÉÂ§©Êï∞',
                labelLevel: 'Á≠âÁ∫ß',
                labelXP: 'ÊÄªXP',
                cameraTitle: 'üì∑ AIÈ£üÂìÅÊâ´Êèè‰ª™',
                cameraDesc: '‰ΩøÁî®Áõ∏Êú∫ËØÜÂà´È£üÁâ©',
                btnStartText: 'ÊøÄÊ¥ªÁõ∏Êú∫',
                btnSwitchText: 'üîÑ ÂàáÊç¢Áõ∏Êú∫',
                btnCaptureText: 'üì∏ ÊçïËé∑',
                loading: 'Âä†ËΩΩ‰∏≠...',
                loggingIn: 'ÁôªÂΩï‰∏≠...',
                creating: 'ÂàõÂª∫‰∏≠...',
                fillFields: 'Â°´ÂÜôÊâÄÊúâÂ≠óÊÆµÔºÅ',
                wrongPassword: 'ÂØÜÁ†ÅÈîôËØØÔºÅ',
                userNotFound: 'Êú™ÊâæÂà∞Áî®Êà∑ÔºÅ',
                emailExists: 'ÁîµÂ≠êÈÇÆ‰ª∂Â∑≤Ê≥®ÂÜåÔºÅ',
                passwordMin: 'ÂØÜÁ†ÅËá≥Â∞ë6‰∏™Â≠óÁ¨¶ÔºÅ',
                loginSuccess: 'ÁôªÂΩïÊàêÂäüÔºÅ',
                accountCreated: 'Ë¥¶Êà∑Â∑≤ÂàõÂª∫ÔºÅ',
                goodbye: 'ÂÜçËßÅÔºÅ',
                welcomeBack: 'Ê¨¢ËøéÂõûÊù•ÔºÅ',
                activatingCamera: 'ÊøÄÊ¥ªÁõ∏Êú∫...',
                loadingAI: 'Âä†ËΩΩAI...',
                cameraActivated: 'Áõ∏Êú∫Â∑≤ÊøÄÊ¥ªÔºÅ',
                cameraError: 'Áõ∏Êú∫ÈîôËØØ',
                analyzing: 'AIÂàÜÊûê‰∏≠...',
                analysisComplete: 'ÂàÜÊûêÂÆåÊàêÔºÅ',
                cameraFront: 'ÂâçÁΩÆÁõ∏Êú∫Â∑≤ÊøÄÊ¥ªÔºÅ',
                cameraBack: 'ÂêéÁΩÆÁõ∏Êú∫Â∑≤ÊøÄÊ¥ªÔºÅ'
            },
            ja: {
                loginSubtitle: 'ÂÆåÂÖ®„Å™„Éà„É¨„Éº„Éã„É≥„Ç∞„Å®Ê†ÑÈ§ä„Ç∑„Çπ„ÉÜ„É†',
                labelEmail: '„É°„Éº„É´',
                labelPassword: '„Éë„Çπ„ÉØ„Éº„Éâ',
                btnLogin: '„É≠„Ç∞„Ç§„É≥',
                linkRegister: '„Ç¢„Ç´„Ç¶„É≥„Éà‰ΩúÊàê',
                labelName: '„Éï„É´„Éç„Éº„É†',
                labelRegEmail: '„É°„Éº„É´',
                labelRegPassword: '„Éë„Çπ„ÉØ„Éº„Éâ',
                labelAge: 'Âπ¥ÈΩ¢',
                labelHeight: 'Ë∫´Èï∑ (cm)',
                labelWeight: '‰ΩìÈáç (kg)',
                labelGoal: 'ÁõÆÊ®ô',
                goalMuscle: 'Á≠ãËÇâÈáè„ÇíÂ¢ó„ÇÑ„Åô',
                goalCut: 'Ê∏õÈáè',
                goalStrength: 'Á≠ãÂäõ„ÇíÂ¢ó„ÇÑ„Åô',
                goalBeginner: 'ÂàùÂøÉËÄÖ',
                btnRegister: '„Ç¢„Ç´„Ç¶„É≥„Éà‰ΩúÊàê',
                linkLogin: '„Ç¢„Ç´„Ç¶„É≥„Éà„Åå„ÅÇ„Çä„Åæ„Åô',
                btnLogout: '„É≠„Ç∞„Ç¢„Ç¶„Éà',
                tabHome: 'üè† „Éõ„Éº„É†',
                tabCamera: 'üì∑ AI„Çπ„Ç≠„É£„Éä„Éº',
                homeWelcome: '„Çà„ÅÜ„Åì„Åù',
                homeText: '„Éï„Ç£„ÉÉ„Éà„Éç„Çπ„ÅÆÊóÖ„Åå„Åì„Åì„Åã„ÇâÂßã„Åæ„Çä„Åæ„ÅôÔºÅ',
                labelDays: '„Éà„É¨„Éº„Éã„É≥„Ç∞Êó•Êï∞',
                labelLevel: '„É¨„Éô„É´',
                labelXP: 'ÂêàË®àXP',
                cameraTitle: 'üì∑ AIÈ£üÂìÅ„Çπ„Ç≠„É£„Éä„Éº',
                cameraDesc: '„Ç´„É°„É©„Çí‰ΩøÁî®„Åó„Å¶È£üÂìÅ„ÇíË≠òÂà•',
                btnStartText: '„Ç´„É°„É©Ëµ∑Âãï',
                btnSwitchText: 'üîÑ „Ç´„É°„É©ÂàáÊõø',
                btnCaptureText: 'üì∏ „Ç≠„É£„Éó„ÉÅ„É£',
                loading: 'Ë™≠„ÅøËæº„Åø‰∏≠...',
                loggingIn: '„É≠„Ç∞„Ç§„É≥‰∏≠...',
                creating: '‰ΩúÊàê‰∏≠...',
                fillFields: '„Åô„Åπ„Å¶„ÅÆ„Éï„Ç£„Éº„É´„Éâ„ÇíÂÖ•ÂäõÔºÅ',
                wrongPassword: '„Éë„Çπ„ÉØ„Éº„Éâ„ÅåÈñìÈÅï„Å£„Å¶„ÅÑ„Åæ„ÅôÔºÅ',
                userNotFound: '„É¶„Éº„Ç∂„Éº„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„ÇìÔºÅ',
                emailExists: '„É°„Éº„É´„ÅØÊó¢„Å´ÁôªÈå≤„Åï„Çå„Å¶„ÅÑ„Åæ„ÅôÔºÅ',
                passwordMin: '„Éë„Çπ„ÉØ„Éº„Éâ„ÅØÊúÄ‰Ωé6ÊñáÂ≠óÔºÅ',
                loginSuccess: '„É≠„Ç∞„Ç§„É≥ÊàêÂäüÔºÅ',
                accountCreated: '„Ç¢„Ç´„Ç¶„É≥„Éà„Åå‰ΩúÊàê„Åï„Çå„Åæ„Åó„ÅüÔºÅ',
                goodbye: '„Åï„Çà„ÅÜ„Å™„ÇâÔºÅ',
                welcomeBack: '„Åä„Åã„Åà„Çä„Å™„Åï„ÅÑÔºÅ',
                activatingCamera: '„Ç´„É°„É©Ëµ∑Âãï‰∏≠...',
                loadingAI: 'AIË™≠„ÅøËæº„Åø‰∏≠...',
                cameraActivated: '„Ç´„É°„É©„ÅåËµ∑Âãï„Åó„Åæ„Åó„ÅüÔºÅ',
                cameraError: '„Ç´„É°„É©„Ç®„É©„Éº',
                analyzing: 'AIÂàÜÊûê‰∏≠...',
                analysisComplete: 'ÂàÜÊûêÂÆå‰∫ÜÔºÅ',
                cameraFront: '„Éï„É≠„É≥„Éà„Ç´„É°„É©„ÅåËµ∑ÂãïÔºÅ',
                cameraBack: '„Éê„ÉÉ„ÇØ„Ç´„É°„É©„ÅåËµ∑ÂãïÔºÅ'
            }
        };
        
        // VARI√ÅVEIS GLOBAIS
        let currentUser = null;
        let cameraStream = null;
        let aiModel = null;
        let facingMode = 'environment';
        let currentLanguage = localStorage.getItem('fitlife_language') || 'pt';
        
        // Aplicar idioma salvo ao carregar
        document.getElementById('loginLanguageSelect').value = currentLanguage;
        changeLoginLanguage(currentLanguage);
        
        // FUN√á√ïES DE TRADU√á√ÉO
        function changeLoginLanguage(lang) {
            currentLanguage = lang;
            localStorage.setItem('fitlife_language', lang);
            
            const t = TRANSLATIONS[lang];
            if (!t) return;
            
            // Atualizar todos os textos da tela de login
            Object.keys(t).forEach(key => {
                const el = document.getElementById(key);
                if (el) {
                    if (el.tagName === 'INPUT') {
                        el.placeholder = t[key];
                    } else {
                        el.textContent = t[key];
                    }
                }
            });
        }
        
        function changeAppLanguage(lang) {
            currentLanguage = lang;
            localStorage.setItem('fitlife_language', lang);
            
            const t = TRANSLATIONS[lang];
            if (!t) return;
            
            // Atualizar textos do app
            Object.keys(t).forEach(key => {
                const el = document.getElementById(key);
                if (el) {
                    if (el.tagName === 'INPUT') {
                        el.placeholder = t[key];
                    } else {
                        el.textContent = t[key];
                    }
                }
            });
            
            // Atualizar texto de boas-vindas personalizado
            if (currentUser) {
                document.getElementById('homeWelcome').textContent = `${t.homeWelcome}, ${currentUser.name}!`;
            }
        }
        
        // RESTO DO C√ìDIGO CONTINUA IGUAL...
        // (Vou continuar no pr√≥ximo bloco por quest√£o de tamanho)
        
        function showLoading(text) {
            const t = TRANSLATIONS[currentLanguage];
            document.getElementById('loadingText').textContent = text || t.loading;
            document.getElementById('loadingOverlay').classList.add('active');
        }
        
        function hideLoading() {
            document.getElementById('loadingOverlay').classList.remove('active');
        }
        
        function showNotification(msg, type = 'success') {
            const notif = document.getElementById('notification');
            notif.textContent = msg;
            notif.style.background = type === 'success' 
                ? 'linear-gradient(135deg, #2ECC71, #27AE60)' 
                : 'linear-gradient(135deg, #E74C3C, #C0392B)';
            notif.style.display = 'block';
            setTimeout(() => notif.style.display = 'none', 3000);
        }
        
        function showRegister() {
            document.getElementById('loginForm').classList.add('hidden');
            document.getElementById('registerForm').classList.remove('hidden');
        }
        
        function showLogin() {
            document.getElementById('registerForm').classList.add('hidden');
            document.getElementById('loginForm').classList.remove('hidden');
        }
        
        // LOGIN
        function doLogin() {
            const t = TRANSLATIONS[currentLanguage];
            const email = document.getElementById('loginEmail').value.trim();
            const password = document.getElementById('loginPassword').value;
            
            if (!email || !password) {
                showNotification('‚ùå ' + t.fillFields, 'error');
                return;
            }
            
            showLoading(t.loggingIn);
            
            setTimeout(() => {
                const savedUser = localStorage.getItem('fitlife_user_' + email);
                
                if (savedUser) {
                    const userData = JSON.parse(savedUser);
                    if (userData.password === password) {
                        currentUser = userData;
                        currentUser.language = currentLanguage;
                        hideLoading();
                        showAppScreen();
                        showNotification('‚úÖ ' + t.loginSuccess);
                    } else {
                        hideLoading();
                        showNotification('‚ùå ' + t.wrongPassword, 'error');
                    }
                } else {
                    hideLoading();
                    showNotification('‚ùå ' + t.userNotFound, 'error');
                }
            }, 500);
        }
        
        // REGISTRO
        function doRegister() {
            const t = TRANSLATIONS[currentLanguage];
            const name = document.getElementById('registerName').value.trim();
            const email = document.getElementById('registerEmail').value.trim();
            const password = document.getElementById('registerPassword').value;
            const age = document.getElementById('registerAge').value;
            const height = document.getElementById('registerHeight').value;
            const weight = document.getElementById('registerWeight').value;
            const goal = document.getElementById('registerGoal').value;
            
            if (!name || !email || !password || !age || !height || !weight) {
                showNotification('‚ùå ' + t.fillFields, 'error');
                return;
            }
            
            if (password.length < 6) {
                showNotification('‚ùå ' + t.passwordMin, 'error');
                return;
            }
            
            showLoading(t.creating);
            
            setTimeout(() => {
                const existingUser = localStorage.getItem('fitlife_user_' + email);
                
                if (existingUser) {
                    hideLoading();
                    showNotification('‚ùå ' + t.emailExists, 'error');
                    return;
                }
                
                const userData = {
                    name: name,
                    email: email,
                    password: password,
                    age: parseInt(age),
                    height: parseInt(height),
                    weight: parseInt(weight),
                    goal: goal,
                    language: currentLanguage,
                    xp: 0,
                    level: 1,
                    days: 0,
                    createdAt: new Date().toISOString()
                };
                
                localStorage.setItem('fitlife_user_' + email, JSON.stringify(userData));
                localStorage.setItem('fitlife_last_email', email);
                
                currentUser = userData;
                
                hideLoading();
                showAppScreen();
                showNotification('‚úÖ ' + t.accountCreated);
            }, 500);
        }
        
        // LOGOUT
        function logout() {
            const t = TRANSLATIONS[currentLanguage];
            if (confirm(t.goodbye + '?')) {
                currentUser = null;
                document.getElementById('appScreen').style.display = 'none';
                document.getElementById('loginScreen').style.display = 'flex';
                
                document.getElementById('loginEmail').value = '';
                document.getElementById('loginPassword').value = '';
                
                showNotification('üëã ' + t.goodbye);
            }
        }
        
        // MOSTRAR APP
        function showAppScreen() {
            document.getElementById('loginScreen').style.display = 'none';
            document.getElementById('appScreen').style.display = 'block';
            
            document.getElementById('userAvatar').textContent = currentUser.name.charAt(0).toUpperCase();
            document.getElementById('userName').textContent = currentUser.name;
            document.getElementById('statDays').textContent = currentUser.days || 0;
            document.getElementById('statLevel').textContent = currentUser.level || 1;
            document.getElementById('statXP').textContent = currentUser.xp || 0;
            
            // Aplicar idioma do usu√°rio
            if (currentUser.language) {
                currentLanguage = currentUser.language;
                document.getElementById('appLanguageSelect').value = currentLanguage;
            }
            
            changeAppLanguage(currentLanguage);
            
            const t = TRANSLATIONS[currentLanguage];
            document.getElementById('homeWelcome').textContent = `${t.homeWelcome}, ${currentUser.name}!`;
            
            const goalTexts = {
                muscle: t.goalMuscle,
                cut: t.goalCut,
                strength: t.goalStrength,
                beginner: t.goalBeginner
            };
            
            document.getElementById('homeText').textContent = `${t.labelGoal}: ${goalTexts[currentUser.goal]}. ${t.homeText}`;
        }
        
        // TROCAR TAB
        function showTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
        }
        
        // C√ÇMERA
        async function startCamera() {
            const t = TRANSLATIONS[currentLanguage];
            try {
                showLoading(t.activatingCamera);
                
                cameraStream = await navigator.mediaDevices.getUserMedia({ 
                    video: { 
                        facingMode: facingMode,
                        width: { ideal: 1280 }, 
                        height: { ideal: 720 } 
                    } 
                });
                
                const video = document.getElementById('video');
                video.srcObject = cameraStream;
                video.style.display = 'block';
                
                document.getElementById('btnStart').style.display = 'none';
                document.getElementById('btnSwitch').style.display = 'block';
                document.getElementById('btnCapture').style.display = 'block';
                
                if (!aiModel) {
                    showLoading(t.loadingAI);
                    aiModel = await cocoSsd.load();
                }
                
                hideLoading();
                showNotification('üì∑ ' + t.cameraActivated);
            } catch (error) {
                hideLoading();
                console.error('Erro na c√¢mera:', error);
                showNotification('‚ùå ' + t.cameraError + ': ' + error.message, 'error');
            }
        }
        
        async function switchCamera() {
            const t = TRANSLATIONS[currentLanguage];
            facingMode = facingMode === 'environment' ? 'user' : 'environment';
            
            if (cameraStream) {
                cameraStream.getTracks().forEach(track => track.stop());
            }
            
            await startCamera();
            const msg = facingMode === 'user' ? t.cameraFront : t.cameraBack;
            showNotification('üîÑ ' + msg);
        }
        
        async function capturePhoto() {
            const t = TRANSLATIONS[currentLanguage];
            const video = document.getElementById('video');
            const canvas = document.getElementById('canvas');
            const ctx = canvas.getContext('2d');
            
            canvas.width = video.videoWidth;
            canvas.height = video.videoHeight;
            ctx.drawImage(video, 0, 0);
            
            video.style.display = 'none';
            canvas.style.display = 'block';
            
            document.getElementById('btnCapture').style.display = 'none';
            document.getElementById('btnSwitch').style.display = 'none';
            document.getElementById('btnStart').style.display = 'block';
            
            if (cameraStream) {
                cameraStream.getTracks().forEach(track => track.stop());
                cameraStream = null;
            }
            
            showLoading(t.analyzing);
            
            const predictions = await aiModel.detect(canvas);
            
            let html = '<h4 style="font-size:1.5em;margin-bottom:15px;">' + t.cameraTitle + ':</h4>';
            
            if (predictions.length > 0) {
                predictions.forEach((p, i) => {
                    html += `<div style="background:rgba(255,255,255,0.05);padding:20px;border-radius:10px;margin:10px 0;border-left:3px solid var(--primary);">
                        <strong style="font-size:1.2em;">${i+1}. ${p.class}</strong><br>
                        <small style="opacity:0.8;">${currentLanguage === 'pt' ? 'Confian√ßa' : currentLanguage === 'en' ? 'Confidence' : currentLanguage === 'es' ? 'Confianza' : currentLanguage === 'fr' ? 'Confiance' : currentLanguage === 'de' ? 'Vertrauen' : currentLanguage === 'it' ? 'Fiducia' : currentLanguage === 'zh' ? 'ÁΩÆ‰ø°Â∫¶' : '‰ø°È†ºÂ∫¶'}: ${(p.score*100).toFixed(1)}%</small>
                    </div>`;
                });
            } else {
                html += '<p style="opacity:0.7;">' + (currentLanguage === 'pt' ? 'Nenhum objeto detectado.' : currentLanguage === 'en' ? 'No objects detected.' : currentLanguage === 'es' ? 'No se detectaron objetos.' : currentLanguage === 'fr' ? 'Aucun objet d√©tect√©.' : currentLanguage === 'de' ? 'Keine Objekte erkannt.' : currentLanguage === 'it' ? 'Nessun oggetto rilevato.' : currentLanguage === 'zh' ? 'Êú™Ê£ÄÊµãÂà∞ÂØπË±°„ÄÇ' : '„Ç™„Éñ„Ç∏„Çß„ÇØ„Éà„ÅåÊ§úÂá∫„Åï„Çå„Åæ„Åõ„Çì„Åß„Åó„Åü„ÄÇ') + '</p>';
            }
            
            document.getElementById('analysis').innerHTML = html;
            document.getElementById('analysis').style.display = 'block';
            
            hideLoading();
            showNotification('‚úÖ ' + t.analysisComplete);
        }
        
        // AUTO-LOGIN
        window.onload = function() {
            const t = TRANSLATIONS[currentLanguage];
            const lastEmail = localStorage.getItem('fitlife_last_email');
            
            if (lastEmail) {
                const savedUser = localStorage.getItem('fitlife_user_' + lastEmail);
                
                if (savedUser) {
                    showLoading(t.loading);
                    
                    setTimeout(() => {
                        currentUser = JSON.parse(savedUser);
                        
                        // Aplicar idioma do usu√°rio
                        if (currentUser.language) {
                            currentLanguage = currentUser.language;
                            document.getElementById('loginLanguageSelect').value = currentLanguage;
                        }
                        
                        hideLoading();
                        showAppScreen();
                        showNotification('üëã ' + t.welcomeBack);
                    }, 800);
                }
            }
            
            console.log('‚úÖ FitLife Pro carregado - Idioma:', currentLanguage);
        };
    </script>
</body>
</html>
